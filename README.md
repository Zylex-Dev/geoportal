# Геопортал объектов черной металлургии Челябинской области

Интерактивная веб-карта промышленных объектов черной металлургии Челябинской области с возможностью просмотра различных слоев и получения дополнительной информации.

## Структура проекта

```
├── index.html               # Главная HTML-страница
├── css/
│   └── styles.css           # CSS-стили
├── js/
│   ├── config.js            # Модуль конфигурации приложения
│   ├── main.js              # Главный модуль приложения
│   ├── server.js            # Модуль для работы с GeoServer
│   ├── layers.js            # Модуль для работы со слоями карты
│   ├── controls.js          # Модуль для элементов управления картой
│   └── tools.js             # Модуль инструментов работы с картой
└── README.md                # Данный файл
```

## Модули JavaScript

- **config.js** - Содержит основные настройки и конфигурацию геопортала, а также утилиту логирования
- **server.js** - Функционал для проверки подключения к GeoServer 
- **layers.js** - Создание и управление слоями карты (базовые слои, промышленные, природные и др.)
- **controls.js** - Создание и настройка элементов управления картой (зум, панель слоев и т.д.)
- **tools.js** - Инструменты для работы с картой (измерение, идентификация объектов)
- **main.js** - Точка входа в приложение, собирает все модули вместе

## Требования

- GeoServer 2.19+ с опубликованными слоями
- Современный веб-браузер с поддержкой JavaScript ES6
- Доступ к интернету для загрузки внешних библиотек

## Используемые технологии

- OpenLayers 7.3.0 - библиотека для работы с веб-картами
- Bootstrap 5.3.0 - CSS-фреймворк для стилизации интерфейса
- JavaScript ES6 модули - для модульной организации кода
- GeoServer - для публикации и раздачи пространственных данных

## Запуск

1. Убедитесь, что GeoServer запущен и доступен по адресу http://localhost:8080/geoserver
2. Откройте index.html в браузере или через локальный веб-сервер
3. При необходимости измените URL GeoServer в config.js

## Описание проекта

Данный проект представляет собой веб-геопортал, который визуализирует пространственные данные об объектах черной металлургии и промышленности Челябинской области. 
Геопортал включает в себя следующие функциональные возможности:
- Отображение интерактивной карты с различными слоями
- Возможность включения/отключения слоев
- Получение информации об объектах
- Измерение расстояний и площадей
- Выбор различных подложек (OpenStreetMap, спутниковые снимки, топографическая карта)

## Технологический стек

- **Frontend**: HTML, CSS, JavaScript, Bootstrap, OpenLayers
- **Backend**: GeoServer для публикации WMS/WFS сервисов
- **База данных**: PostgreSQL с расширением PostGIS
- **Подготовка геоданных**: QGIS

## Установка и настройка

### Предварительные требования

1. Установленный Docker для запуска GeoServer
2. PostgreSQL с PostGIS для хранения геоданных
3. QGIS для подготовки геоданных (опционально, если данные уже подготовлены)
4. Веб-сервер для хостинга фронтенд-части (можно использовать простой HTTP сервер)

### Настройка GeoServer

1. Запустите GeoServer с помощью Docker:
   ```bash
   docker run -d --name geoserver -p 8080:8080 kartoza/geoserver:latest
   ```

2. Откройте административную панель GeoServer по адресу `http://localhost:8080/geoserver/web/`
   (логин: admin, пароль: geoserver)

3. Создайте новый рабочий процесс (workspace) с именем `geoportal`

4. Настройте хранилище данных PostgreSQL:
   - Создайте новое хранилище данных типа PostGIS
   - Укажите параметры подключения к вашей PostgreSQL базе данных
   - Убедитесь, что в базе данных созданы соответствующие таблицы с геоданными

5. Опубликуйте слои из базы данных:
   - Опубликуйте каждый слой с соответствующим стилем
   - Настройте проекцию (рекомендуется EPSG:3857 для веб-карт)
   - Проверьте, что слои доступны через WMS

### Настройка веб-приложения

1. Отредактируйте файл `js/app.js`:
   - Укажите корректный URL вашего GeoServer в переменной `geoserverUrl`
   - Укажите название рабочего процесса в переменной `workspace`
   - При необходимости настройте центрирование карты на нужную территорию

2. Разместите файлы проекта на веб-сервере или запустите локальный сервер для разработки:
   ```bash
   # Если у вас установлен Node.js
   npx http-server -p 8000
   
   # Или с помощью Python
   python -m http.server 8000
   ```

3. Откройте браузер и перейдите по адресу `http://localhost:8000`

## Как использовать геопортал

1. **Управление слоями**: Используйте панель слоев в левой части для включения/отключения слоев
2. **Смена подложки**: Выберите нужную подложку из выпадающего списка
3. **Получение информации**: Нажмите кнопку "Информация" и кликните на объект для получения его атрибутов
4. **Измерение**: Нажмите кнопку "Измерить" и нарисуйте линию для измерения расстояния

## Особенности реализации

- Геопортал использует OpenLayers для отображения карты и взаимодействия с ней
- Данные о промышленных объектах загружаются через WMS сервисы GeoServer
- Интерфейс адаптивен и корректно работает на мобильных устройствах

## Дальнейшее развитие

- Добавление панели поиска объектов
- Интеграция аналитических инструментов
- Добавление возможности фильтрации объектов по атрибутам
- Реализация сохранения и загрузки пользовательских карт
- Добавление модуля создания отчетов

## Лицензия

Данный проект распространяется под лицензией MIT.

## Контакты

Для вопросов и предложений по улучшению геопортала, пожалуйста, обращайтесь по адресу: ваш.email@домен.ru 