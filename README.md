# Геопортал объектов черной металлургии Челябинской области

Интерактивный геопортал для визуализации и работы с пространственными данными объектов черной металлургии Челябинской области.

## Технологии

- Frontend: HTML, CSS, JavaScript, OpenLayers
- Backend: GeoServer, Python-сервис авторизации
- Инфраструктура: Docker, Nginx, PostgreSQL/PostGIS

## Особенности

- Интерактивная карта с различными базовыми подложками
- Отображение промышленных объектов черной металлургии
- Инструменты для измерения и идентификации объектов
- Полностью контейнеризированное решение
- Локальные библиотеки для автономной работы
- Модульная организация фронтенд-кода (CSS, HTML)
- Преднастроенный GeoServer с готовыми слоями и стилями

## Запуск проекта

### Предварительные требования

- Docker и Docker Compose
- Git для клонирования репозитория

### Инструкции по запуску

1. Клонируйте репозиторий:
   ```bash
   git clone [URL репозитория]
   cd geoportal
   ```

2. Запустите проект с помощью Docker Compose:
   ```bash
   docker-compose up -d
   ```

3. Откройте геопортал в браузере:
   ```
   http://localhost
   ```

4. GeoServer будет доступен по адресу:
   ```
   http://localhost:8080/geoserver
   ```
   - Логин: admin
   - Пароль: geoserver

### Остановка проекта

```bash
docker-compose down
```

## Структура проекта

- `/frontend` - модульная фронтенд-часть проекта
  - `/frontend/css` - модульные CSS-стили
    - `/frontend/css/base` - базовые стили (сброс, типографика)
    - `/frontend/css/layout` - стили для разметки и сетки
    - `/frontend/css/components` - стили для компонентов интерфейса
    - `/frontend/css/features` - стили для конкретных функциональных блоков
  - `/frontend/js` - JavaScript модули 
  - `/frontend/templates` - HTML компоненты
    - `/frontend/templates/layout` - компоненты верстки (header, footer)
    - `/frontend/templates/components` - UI компоненты (sidebar, buttons, etc)
    - `/frontend/templates/modals` - модальные окна
  - `/frontend/img` - изображения и иконки
  - `/frontend/fonts` - шрифты
  - `/frontend/fontawesome` - иконки FontAwesome
  - `/frontend/build_html.py` - скрипт для сборки HTML из компонентов
  - `/frontend/nginx.conf` - конфигурация веб-сервера Nginx для фронтенда
  - `/frontend/Dockerfile` - Dockerfile для сборки фронтенд-контейнера
  - `/frontend/MODULAR.md` - документация по модульной структуре
- `/geoserver_data` - предварительно настроенные данные GeoServer (слои, стили, настройки)
- `/database` - данные и скрипты для PostgreSQL
  - `/database/init` - скрипты инициализации базы данных
  - `/database/data` - данные PostgreSQL
- `/auth_service` - микросервис для аутентификации пользователей
- `docker-compose.yml` - конфигурация для запуска всех контейнеров
- `DEPLOYMENT.md` - инструкции по развертыванию проекта

## Модули JavaScript

- **config.js** - Содержит основные настройки и конфигурацию геопортала, а также утилиту логирования
- **server.js** - Функционал для проверки подключения к GeoServer 
- **layers.js** - Создание и управление слоями карты (базовые слои, промышленные, природные и др.)
- **controls.js** - Создание и настройка элементов управления картой (зум, панель слоев и т.д.)
- **tools.js** - Инструменты для работы с картой (измерение, идентификация объектов)
- **main.js** - Точка входа в приложение, собирает все модули вместе
- **auth.js** - Модуль аутентификации пользователей
- **extensions.js** - Вспомогательные расширения для основных функций

## Контейнеры Docker

### Компоненты

1. **Frontend (Nginx)** - статический веб-сервер для обслуживания пользовательского интерфейса
   - Собирает HTML из модульных компонентов при сборке контейнера
   - Сервирует статические файлы (JS, CSS, изображения)
   - Проксирует запросы к GeoServer и сервису авторизации

2. **GeoServer** - сервер для публикации геопространственных данных
   - Публикует и обслуживает слои пространственных данных
   - Настроен с готовыми стилями и рабочими пространствами

3. **Auth Service** - микросервис для аутентификации пользователей
   - Обеспечивает регистрацию и вход пользователей
   - Управляет правами доступа к данным

4. **PostgreSQL/PostGIS** - СУБД для хранения геоданных
   - Хранит пространственные данные и данные пользователей
   - Предоставляет мощные геопространственные функции

## Дальнейшее развитие

- Добавление панели поиска объектов
- Интеграция аналитических инструментов
- Добавление возможности фильтрации объектов по атрибутам
- Реализация сохранения и загрузки пользовательских карт
- Добавление модуля создания отчетов

## Развертывание

Для детальных инструкций по развертыванию проекта см. [DEPLOYMENT.md](DEPLOYMENT.md). 